
## question no: 15

## question : How does MongoDB handle transactions?

## answer: MongoDB handles transactions through its support for multi-document ACID (Atomicity, Consistency, Isolation, Durability) transactions, which allow multiple operations on multiple documents to be executed as a single, atomic unit of work. This feature was introduced in MongoDB 4.0 and was further enhanced in subsequent versions. Prior to this, MongoDB supported atomic operations only at the document level, meaning that a single operation on a single document was atomic, but there was no support for transactions that spanned multiple documents or collections. With multi-document transactions, MongoDB provides the ability to group multiple read and write operations into a single transaction, ensuring that either all of the operations are successfully committed or none of them are. This is particularly important for applications that require strong data consistency, such as financial systems, where it is critical that all parts of a transaction are completed successfully. To use transactions in MongoDB, you start by creating a session, which provides context for the transaction. You then start a transaction within that session and perform your operations. Once all operations have been completed, you commit the transaction to make the changes permanent. If any operation within the transaction fails, you can abort the transaction, which rolls back all the changes made during the transaction, leaving the database in its previous state. Here's a simple example of how to use a transaction in MongoDB: const session = client.startSession(); session.startTransaction(); try { await collection1.insertOne({name: 'Alice'}, {session}); await collection2.insertOne({name: 'Bob'}, {session}); await session.commitTransaction(); } catch (error) { await session.abortTransaction(); } finally { session.endSession(); }. This example shows how to insert documents into two collections within a single transaction. If any of the operations fail, the transaction is aborted, and all changes are rolled back. MongoDB transactions are implemented using a combination of the WiredTiger storage engine's snapshot isolation and MongoDB's replication mechanisms. This ensures that transactions are isolated from other operations and that they are durable, even in the event of a crash or failover. MongoDB also supports distributed transactions, which span multiple shards in a sharded cluster. This allows transactions to be executed across multiple nodes in a distributed system while maintaining ACID properties. However, it's important to note that using transactions in MongoDB can have performance implications, as transactions require additional overhead to manage the ACID guarantees. Therefore, it's recommended to use transactions only when necessary, such as when performing operations that require strong consistency across multiple documents or collections. In summary, MongoDB's support for multi-document ACID transactions provides a powerful tool for ensuring data consistency in complex operations, making it suitable for a wide range of applications that require strong data integrity.
      